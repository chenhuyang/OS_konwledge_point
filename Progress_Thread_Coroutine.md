# OS_konwledge_point
## 进程、线程和协程是三个在多任务处理中常听到的概念，三者各有区别又相互联系。
### 1.1 进程
进程是一个程序在一个数据集中的一次动态执行过程，可以简单理解为“正在执行的程序”，它是CPU资源分配和调度的独立单位。 
进程一般由程序、数据集、进程控制块三部分组成。我们编写的程序用来描述进程要完成哪些功能以及如何完成；
数据集则是程序在执行过程中所需要使用的资源；
进程控制块用来记录进程的外部特征，描述进程的执行变化过程，系统可以利用它来控制和管理进程，它是系统感知进程存在的唯一标志。 
进程的局限是创建、撤销和切换的开销比较大。
#### 1.1.1 通俗理解进程
* 比如一个微信应用在未运行时是仅仅是一个程序
* 打开运行微信程序，此时微信就以一个进程的身份在运行，因此会消耗操作系统的内存空间、cpu处理时间和其他资源
* 多个进程同时运行就好比打开qq、微信、网易云音乐、word等应用同时运行这些进程
* 当你同时打开这些应用你会觉得电脑的运行速度突然变慢了，毕竟进程是相对于线程来说是比较消耗CPU、内存等资源的
* 进程执行一个工作任务，若需要执行第二个任务，则需要等待第一个任务执行完毕方可执行下一个任务
### 1.2 线程
线程是在进程之后发展出来的概念。 线程也叫轻量级进程，它是一个基本的CPU执行单元，也是程序执行过程中的最小单元，
由线程ID、程序计数器、寄存器集合和堆栈共同组成。一个进程可以包含多个线程。 
线程的优点是减小了程序并发执行时的开销，提高了操作系统的并发性能，缺点是线程没有自己的系统资源，只拥有在运行时必不可少的资源，
但同一进程的各线程可以共享进程所拥有的系统资源，如果把进程比作一个车间，那么线程就好比是车间里面的工人。
不过对于某些独占性资源存在锁机制，处理不当可能会产生“死锁”。
#### 1.2.1 通俗理解线程
* 我们微信聊天可以用得这么顺畅，是因为线程的"功劳"
* 我们在键盘上输入(线程A)--屏幕上显示输入的内容(线程B)--输出的内容保存在硬盘(线程C) #这个过程仿佛是同时进行
* 若没有线程，给用户的体验效果就很糟糕了，那只能是程序先等键盘输入内容，然后过好长时间，再把你输入的内容显示在显示器上，等内容显示出来了，再将内容保存在硬盘上 
* 线程之间共享的资源也是有限的
### 1.3 协程
协程是一种用户态的轻量级线程，又称微线程，英文名Coroutine，协程的调度完全由用户控制。人们通常将协程和子程序（函数）比较着理解。 
子程序调用总是一个入口，一次返回，一旦退出即完成了子程序的执行。 
协程的起始处是第一个入口点，在协程里，返回点之后是接下来的入口点。在python中，协程可以通过yield来调用其它协程。通过yield方式转移执行权的协程之间不是调用者与被调用者的关系，而是彼此对称、平等的，通过相互协作共同完成任务。

`其运行的大致流程如下：`
* 第一步，协程A开始执行。
* 第二步，协程A执行到一半，进入暂停，通过yield命令将执行权转移到协程B。
* 第三步，（一段时间后）协程B交还执行权。
* 第四步，协程A恢复执行。

`协程的特点在于是一个线程执行，与多线程相比，其优势体现在：`

协程的执行效率非常高。因为子程序切换不是线程切换，而是由程序自身控制，因此，没有线程切换的开销，和多线程比，线程数量越多，协程的性能优势就越明显。
协程不需要多线程的锁机制。在协程中控制共享资源不加锁，只需要判断状态就好了。
### 1.4 总结
#### 1.4.1操作系统的设计，因此可以归结为三点：
* 以多进程形式，允许多个任务同时运行；
* 以多线程形式，允许单个任务分成不同的部分运行；
* 提供协调机制，一方面防止进程之间和线程之间产生冲突，另一方面允许进程之间和线程之间共享资源
